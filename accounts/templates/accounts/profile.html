{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Profile" %} - AIMS EXAM{% endblock %}

{% block content %}
<div class="topbar">
    <h1 class="topbar-title">{% trans "My Profile" %}</h1>
</div>

{% include 'partials/messages.html' %}

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-xl);">
    <!-- Profile Info Card -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">{% trans "Profile Information" %}</h3>
        </div>

        <form method="post">
            {% csrf_token %}

            {% for field in form %}
            <div class="form-group">
                <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                {{ field }}
                {% if field.errors %}
                <span class="form-error">{{ field.errors.0 }}</span>
                {% endif %}
                {% if field.help_text %}
                <span class="form-help">{{ field.help_text }}</span>
                {% endif %}
            </div>
            {% endfor %}

            <button type="submit" class="btn btn-primary">
                {% trans "Save Changes" %}
            </button>
        </form>
    </div>

    <!-- Account Details Card -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">{% trans "Account Details" %}</h3>
        </div>

        <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
            <div>
                <span class="text-muted" style="font-size: 0.8125rem;">{% trans "Email" %}</span>
                <p style="font-weight: 500; margin: var(--spacing-xs) 0 0 0; color: var(--text-primary);">
                    {{ user.email }}
                </p>
            </div>

            <div>
                <span class="text-muted" style="font-size: 0.8125rem;">{% trans "Role" %}</span>
                <p style="font-weight: 500; margin: var(--spacing-xs) 0 0 0; color: var(--text-primary);">
                    {% if user.role == 'super_admin' %}{% trans "Super Admin" %}
                    {% elif user.role == 'teacher' %}{% trans "Teacher" %}
                    {% else %}{% trans "Student" %}{% endif %}
                </p>
            </div>

            {% if user.primary_school %}
            <div>
                <span class="text-muted" style="font-size: 0.8125rem;">{% trans "School" %}</span>
                <p style="font-weight: 500; margin: var(--spacing-xs) 0 0 0; color: var(--text-primary);">
                    {{ user.primary_school.name }}
                </p>
            </div>
            {% endif %}

            <div>
                <span class="text-muted" style="font-size: 0.8125rem;">{% trans "Member Since" %}</span>
                <p style="font-weight: 500; margin: var(--spacing-xs) 0 0 0; color: var(--text-primary);">
                    {{ user.created_at|date:"d M Y" }}
                </p>
            </div>
        </div>

        <hr style="border: none; border-top: 1px solid var(--border-color); margin: var(--spacing-lg) 0;">

        <a href="{% url 'accounts:password_change' %}" class="btn btn-outline btn-block">
            {% trans "Change Password" %}
        </a>
    </div>
</div>
{% endblock %}